<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay 118 News & Announcements</title>

    <link rel="shortcut icon" type="image/png" href="Logo-Favicon-removebg-preview.png">
    <meta name="description" content="Latest news, updates, and announcements from Barangay 118">
    <meta name="keywords" content="barangay news, community updates, announcements, barangay 118 news">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="News.css">
    
</head>

<body>
    <header>
        <div class="container">
            <div class="navbar">
                <a href="index.html" class="logo">
                    <img src="Logo-Favicon-removebg-preview.png" alt="Barangay 118 Logo" width="70">
                    <h1>BARANGAY 118 ONLINE SYSTEM</h1>
                </a>
                <nav class="nav-links">
                    <a href="index.html"><i class="fas fa-home"></i><span>Home</span></a>
                    <a href="AboutUs.html"><i class="fas fa-info-circle"></i><span>About Us</span></a>
                    <a href="News.html" class="active"><i class="fas fa-newspaper"></i><span>News</span></a>
                    <a href="Emergency.html"><i class="fas fa-exclamation-triangle"></i><span>Emergency</span></a>
                    <a href="CreateAnAccount.html"><i class="fas fa-user-plus"></i><span>Create Account</span></a>
                    <a href="LogIn.html"><i class="fas fa-sign-in-alt"></i><span>Login</span></a>
                </nav>
            </div>
        </div>
    </header>
    
    <section class="page-hero">
        <div class="container">
            <h2>News & Announcements</h2>
            <p>Latest updates, advisories, and community news for Barangay 118.</p>
        </div>
    </section>



    <section class="barangay-news">
        <!--Left-->
        <div class="news-header">
            <h2 id="news-section-title">Latest News</h2>
            <p class="news-subtitle" id="news-section-subtitle">Stay updated with the latest news and announcements from Barangay 118</p>
        </div>
        <div class="news-grid" id="news-grid-container">
            <!-- News will be dynamically loaded here -->
        </div>

        <!--Right-->
    <div class="news-modal" id="news-modal">
        <div class="news-modal-content">
            <div class="news-modal-header">
                <h2 class="news-modal-title" id="news-modal-title">News Title</h2>
                <button class="news-modal-close" id="news-modal-close">&times;</button>
            </div>
            <div class="news-modal-meta">
                <div class="news-modal-date" id="news-modal-date"><i class="far fa-calendar"></i> Date</div>
                <div class="news-modal-category" id="news-modal-category">Category</div>
            </div>
            <img id="news-modal-image" src="" alt="" class="news-modal-image">
            <div class="news-modal-body" id="news-modal-body"></div>
            <div class="news-modal-footer">
                <button class="btn-secondary" id="news-modal-close-btn">Close</button>
            </div>
        </div>
    </div>
    </section>


    
    <!-- Event Modal (for calendar events) -->
    <div class="modal" id="event-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-event-title">Event Details</h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-footer">
                <button class="btn-secondary" id="close-modal-btn">Close</button>
            </div>
        </div>
    </div>
    
    <section class="events">
        <div class="container">
            <h2 class="section-title" id="events-title">Barangay 118 Community Events Calendar</h2>
            <div class="news-bottom-grid">
                <div class="news-column">
                    <h3>PAST EVENTS</h3>
                    <div class="news-list-item"><h4>New Year's Resolution Forum</h4><p>Community forum to discuss goals and plans for the new year.</p></div>
                    <div class="news-list-item"><h4>Barangay Christmas Party</h4><p>Annual Christmas celebration for all residents of Barangay 118.</p></div>
                    <div class="news-list-item"><h4>Senior Citizens Day</h4><p>Special program and activities for senior residents of Barangay 118.</p></div>
                    <div class="news-list-item"><h4>Community Clean-up Drive</h4><p>Monthly community clean-up activity. All residents are welcome to join.</p></div>
                </div>
                <div class="news-column center">
                    <h3>CURRENT EVENT</h3>
                    <div class="event-card">
                        <div class="event-image-placeholder">EVENT IMAGE</div>
                        <p class="event-desc">Ongoing barangay activities and official announcements.</p>
                        <span class="event-sub">Updated regularly</span>
                    </div>
                </div>
                <div class="news-column">
                    <h3>UPCOMING EVENTS</h3>
                    <div class="news-list-item"><h4>Youth Sports Orientation</h4><p>Orientation for upcoming inter-barangay youth sports activities.</p></div>
                    <div class="news-list-item"><h4>Anti-Dengue Awareness Campaign</h4><p>Information drive on dengue prevention and barangay clean zones.</p></div>
                    <div class="news-list-item"><h4>Disaster Preparedness Seminar</h4><p>Training on earthquake and fire emergency response.</p></div>
                    <div class="news-list-item"><h4>Livelihood Skills Training</h4><p>Skills training program to support small business and livelihood.</p></div>
                </div>
            </div> 
        </div>
    </section>
    

    <!-- Calendar Section - Centered and alone at the bottom -->
    <section>
        <div class="container">
            <h2 class="section-title" id="calendar-title">Barangay 118 Calendar</h2>
            <div class="events-container">
                <div class="calendar-section">
                    <div class="calendar">
                        <div class="calendar-header">
                            <div class="calendar-nav">
                                <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                                <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <h3 id="calendar-month">November 2026</h3>
                        </div>
                        <div class="calendar-grid" id="calendar-dates"></div>
                    </div>
                </div>
            </div>
        </div> 
    </section>
    
    
    <footer id="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Barangay 118 Online System</h3>
                    <p>Connecting the community through secure digital services.</p>
                </div>
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> <span>402 2nd St, Grace Park East</span></li>
                        <li><i class="fas fa-phone"></i> <span>(02) 8123-4567</span></li>
                        <li><i class="fas fa-envelope"></i> <span>info@barangay118.gov.ph</span></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Follow Us</h3>
                    <ul>
                        <li><i class="fab fa-facebook"></i> <span>Barangay 118 Facebook</span></li>
                        <li><i class="fab fa-facebook-messenger"></i> <span>Messenger Chat</span></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">&copy; 2025 Barangay 118 Online System. All Rights Reserved.</div>
        </div>
    </footer>
    
<script>
    // Barangay News Data (NEW)
    const barangayNewsData = {
    newsSection: {
        title: "Latest Stories",
        subtitle: "Stay updated with the latest news and announcements from Barangay 118"
    },
    news: [
        {
            id: 1,
            title: "Japan builds new facility for Grace Park Health Center in Caloocan (2025)",
            excerpt: "The Embassy of Japan provided around PHP 6 million to construct the new Grace Park Health Center in Caloocan City.",
            content: "On March 10, 2025, Embassy of Japan Second Secretary MATSUSHIGE Tomoaki attended the turnover ceremony for the 'Project for the Construction of the Grace Park Health Center in Caloocan City.' Japan allocated USD 120,477 (≈ PHP 6 million) under the Official Development Assistance – Grant Assistance for Grass-roots Human Security Projects (GGP). This new facility replaces the old, flood-prone building to ensure safer, cleaner, and modern healthcare services for approximately 9,600 patients annually.",
            date: "March 10, 2025",
            image: "https://www.ph.emb-japan.go.jp/files/100808323.jpg",
            category: "Community",
            readTime: "2 months ago",
            isFeatured: true
        },
        {
            id: 2,
            title: "Caloocan Fire: 1 PWD dead, 50 families displaced",
            excerpt: "A person with disability died after a large fire broke out in Barangay 118, Grace Park, Caloocan in December 2024.",
            content: "According to Caloocan BFP, the fire started around 2:56 AM at 4th Avenue and quickly spread due to houses being built closely together. 'A PWD died in a fire which razed about 20 houses in Caloocan City…' GMA News reported.",
            date: "December 2024",
            image: "https://images.gmanews.tv/webpics/2024/12/caloocan_fire_12-29-24_2024_12_29_18_34_08.jpg",
            category: "Fire",
            readTime: "2 months ago",
            isFeatured: false
        },
        {
            id: 3,
            title: "New Barangay Health Center in Brgy. 118-120, Caloocan",
            excerpt: "SM Foundation turned over the newly improved Barangay Health Center of Grace Park (Brgy. 118-120) in Caloocan City days before 2024 arrived.",
            content: "SM Foundation and its partners led this renovation project to turn the facility into a more comfortable and efficient clinic.",
            date: "January 16, 2024",
            image: "https://i0.wp.com/marketmonitor.com.ph/wp-content/uploads/2024/01/SMFI-image2.jpg?resize=618%2C927&ssl=1",
            category: "Health",
            readTime: "2 months ago",
            isFeatured: false
        },
        {
            id: 4,
            title: "Barangay 118 Annual Sports Festival",
            excerpt: "Annual sports competition for youth and adults with various games and activities.",
            content: "The Barangay 118 Annual Sports Festival is scheduled for November 2025, featuring basketball, volleyball, badminton, and traditional Filipino games.",
            date: "November 15, 2025",
            image: "https://images.unsplash.com/photo-1546519638-68e109498ffc?auto=format&fit=crop&w=800&q=80",
            category: "Events",
            readTime: "2 months ago",
            isFeatured: false
        }
    ]
};

// Barangay Calendar Data (UPDATED - with Past & Upcoming Events)
const barangayCalendarData = {
    events: [
        // ===== PAST EVENTS =====
        {
            day: "10",
            month: "Jan",
            title: "New Year's Resolution Forum",
            description: "Community forum to discuss goals and plans for the new year.",
            time: "6:00 PM - 8:00 PM",
            location: "Barangay 118 Multi-purpose Hall"
        },
        {
            day: "15",
            month: "Dec",
            title: "Barangay Christmas Party",
            description: "Annual Christmas celebration for all residents of Barangay 118.",
            time: "5:00 PM - 10:00 PM",
            location: "Barangay 118 Covered Court"
        },
        {
            day: "30",
            month: "Nov",
            title: "Senior Citizens Day",
            description: "Special program and activities for senior residents of Barangay 118.",
            time: "9:00 AM - 3:00 PM",
            location: "Barangay 118 Social Hall"
        },
        {
            day: "24",
            month: "Nov",
            title: "Community Clean-up Drive",
            description: "Monthly community clean-up activity. All residents are welcome to join.",
            time: "6:00 AM - 9:00 AM",
            location: "Meet at Barangay 118 Plaza"
        },

        // ===== UPCOMING EVENTS =====
        {
            day: "25",
            month: "Jan",
            title: "Youth Sports Orientation",
            description: "Orientation for upcoming inter-barangay youth sports activities.",
            time: "3:00 PM - 5:00 PM",
            location: "Barangay 118 Covered Court"
        },
        {
            day: "2",
            month: "Feb",
            title: "Anti-Dengue Awareness Campaign",
            description: "Information drive on dengue prevention and barangay clean zones.",
            time: "8:00 AM - 11:00 AM",
            location: "Barangay 118 Plaza"
        },
        {
            day: "10",
            month: "Feb",
            title: "Disaster Preparedness Seminar",
            description: "Training on earthquake and fire emergency response.",
            time: "1:00 PM - 4:00 PM",
            location: "Barangay 118 Hall Covered Court"
        },
        {
            day: "18",
            month: "Feb",
            title: "Livelihood Skills Training",
            description: "Skills training program to support small business and livelihood.",
            time: "9:00 AM - 3:00 PM",
            location: "Barangay 118 Training Room"
        }
    ],

    sectionTitles: {
        events: "Barangay 118 Community Events Calendar",
        upcomingEvents: "Upcoming Events"
    }
};

    
    let currentDate = new Date(2025, 10, 1); // November 2025
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();
    
    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize News Section
        renderNews();
        setupNewsEventListeners();
        setupNewsListScrolling();
        
        // Initialize Calendar Section
        renderEvents();
        generateCalendar(currentMonth, currentYear);
        setupEventListeners();
    });
    
    // ===== NEWS SECTION FUNCTIONS =====
    
    function renderNews() {
        const newsGrid = document.getElementById('news-grid-container');
        if (!newsGrid) return;

        newsGrid.innerHTML = '';

        // Ensure we have news data
        if (!barangayNewsData.news || barangayNewsData.news.length === 0) {
            newsGrid.innerHTML = '<div class="no-news">No news available</div>';
            return;
        }

        // Sort news by date (newest first)
        const sortedNews = [...barangayNewsData.news].sort((a, b) => {
            // Simple date sorting (for demonstration)
            return new Date(b.date) - new Date(a.date);
        });

        // Find featured news
        const featuredNews = sortedNews.find(news => news.isFeatured) || sortedNews[0];
        const regularNews = sortedNews.filter(news => news.id !== featuredNews.id).slice(0, 3);

        // Featured News (Left Side - 55%)
        const featuredHtml = `
            <div class="featured-news">
                <div class="featured-card">
                    <div class="featured-image-container">
                        <img src="${featuredNews.image}" alt="${featuredNews.title}" class="featured-image" onerror="this.src='https://via.placeholder.com/800x400?text=News+Image'">
                        <div class="featured-badge">${featuredNews.category}</div>
                    </div>
                    <div class="featured-content">
                        <div class="featured-date">
                            <i class="far fa-calendar"></i> ${featuredNews.date}
                        </div>
                        <h3 class="featured-title">${featuredNews.title}</h3>
                        <p class="featured-excerpt">${featuredNews.excerpt}</p>
                        <a href="#" class="featured-read-more" data-news-id="${featuredNews.id}"> Read More <i class="fas fa-arrow-right"></i> </a>
                    </div>
                </div>
            </div>
        `;

        // News List (Right Side - 45%)
        let newsListHtml = `
            <div class="news-list">
                <div class="news-list-header">
                    <h3 class="news-list-title">Mga Balita</h3>
                </div>
                <div class="news-list-items" id="news-list-items">
        `;

        regularNews.forEach(news => {
            newsListHtml += `
                <div class="news-item" data-news-id="${news.id}">
                    <div class="news-item-image-container">
                        <img src="${news.image}" alt="${news.title}" class="news-item-image" onerror="this.src='https://via.placeholder.com/300x200?text=News'">
                        <div class="news-item-badge">${news.category}</div>
                    </div>
                    <div class="news-item-content">
                        <div class="news-item-date">
                            <i class="far fa-calendar"></i> ${news.date}
                        </div>
                        <h4 class="news-item-title">${news.title}</h4>
                        <p class="news-item-excerpt">${news.excerpt}</p>
                        <div class="news-item-meta">
                            <a href="#" class="news-item-read-more" data-news-id="${news.id}"> Read More <i class="fas fa-arrow-right"></i> </a>
                            <span class="news-item-read-time"><i class="far fa-clock"></i> ${news.readTime}</span>
                        </div>
                    </div>
                </div>
            `;
        });

        newsListHtml += `
                </div>
            </div>
        `;
        
        newsGrid.innerHTML = featuredHtml + newsListHtml;
        
        // Update section titles
        if (document.getElementById('news-section-title')) {
            document.getElementById('news-section-title').textContent = barangayNewsData.newsSection.title;
        }
        if (document.getElementById('news-section-subtitle')) {
            document.getElementById('news-section-subtitle').textContent = barangayNewsData.newsSection.subtitle;
        }
    }

    function setupNewsListScrolling() {
        const newsListItems = document.getElementById('news-list-items');
        if (!newsListItems) return;
        
        // Calculate max height based on 3 items
        const calculateMaxHeight = () => {
            if (newsListItems.children.length === 0) return;
            
            const firstItem = newsListItems.children[0];
            const itemHeight = firstItem.offsetHeight;
            const gap = 0;
            
            // Set max height to show exactly 3 items
            const maxHeight = (itemHeight * 3) + (gap * 2);
            newsListItems.style.maxHeight = `${maxHeight}px`;
            
            const featuredNews = document.querySelector('.featured-news');
            if (featuredNews) {
                const featuredWidth = featuredNews.offsetWidth;
                newsListItems.parentElement.style.maxWidth = `${featuredWidth * 0.818}px`; // 45% of 55%
            }
        };
        
        setTimeout(calculateMaxHeight, 100);
        
        window.addEventListener('resize', calculateMaxHeight);
    }

    // News Modal Functions
    function showNewsModal(newsId) {
        const newsItem = barangayNewsData.news.find(item => item.id === newsId);
        if (newsItem) {
            document.getElementById('news-modal-title').textContent = newsItem.title;
            document.getElementById('news-modal-date').innerHTML = `<i class="far fa-calendar"></i> ${newsItem.date}`;
            document.getElementById('news-modal-category').textContent = newsItem.category;
            document.getElementById('news-modal-image').src = newsItem.image;
            document.getElementById('news-modal-image').alt = newsItem.title;
            document.getElementById('news-modal-body').innerHTML = `
                <p>${newsItem.content}</p>
            `;
            document.getElementById('news-modal').style.display = 'flex';
        }
    }

    function closeNewsModal() {
        document.getElementById('news-modal').style.display = 'none';
    }

    // Set up news event listeners
    function setupNewsEventListeners() {
        // Read more buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('featured-read-more') || 
                e.target.classList.contains('news-item-read-more') ||
                e.target.parentElement.classList.contains('featured-read-more') ||
                e.target.parentElement.classList.contains('news-item-read-more')) {
                e.preventDefault();
                const newsId = parseInt(e.target.getAttribute('data-news-id') || 
                              e.target.parentElement.getAttribute('data-news-id'));
                showNewsModal(newsId);
            }
            
            // News items click
            if (e.target.closest('.news-item')) {
                e.preventDefault();
                const newsItem = e.target.closest('.news-item');
                const newsId = parseInt(newsItem.getAttribute('data-news-id'));
                showNewsModal(newsId);
            }
        });
        
        // Modal close buttons
        const newsModalClose = document.getElementById('news-modal-close');
        if (newsModalClose) {
            newsModalClose.addEventListener('click', closeNewsModal);
        }
        
        const newsModalCloseBtn = document.getElementById('news-modal-close-btn');
        if (newsModalCloseBtn) {
            newsModalCloseBtn.addEventListener('click', closeNewsModal);
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('news-modal')) {
                closeNewsModal();
            }
        });
    }
    
    // ===== CALENDAR SECTION FUNCTIONS (ORIGINAL) =====
    
    // Render events list
    function renderEvents() {
        const eventsContainer = document.getElementById('events-container');
        if (!eventsContainer) return;
    
        eventsContainer.innerHTML = '';
        
        if (!barangayCalendarData.events || barangayCalendarData.events.length === 0) {
            eventsContainer.innerHTML = '<div class="no-events">No upcoming events</div>';
            return;
        }
    
        // Sort events by date
        const sortedEvents = [...barangayCalendarData.events].sort((a, b) => {
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const aMonth = monthNames.indexOf(a.month);
            const bMonth = monthNames.indexOf(b.month);
            const aDay = parseInt(a.day);
            const bDay = parseInt(b.day);
            
            if (aMonth !== bMonth) return aMonth - bMonth;
            return aDay - bDay;
        });
    
        // Show only upcoming events (max 5)
        const today = new Date();
        const currentMonthIndex = today.getMonth();
        const currentDay = today.getDate();
        
        const upcomingEvents = sortedEvents.filter(event => {
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const eventMonth = monthNames.indexOf(event.month);
            const eventDay = parseInt(event.day);
            
            // If event is in future month, or same month but future day
            return eventMonth > currentMonthIndex || 
                   (eventMonth === currentMonthIndex && eventDay >= currentDay);
        }).slice(0, 5);
    
        upcomingEvents.forEach(event => {
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.innerHTML = `
                <div class="event-date">
                    <div class="day">${event.day}</div>
                    <div class="month">${event.month}</div>
                </div>
                <div class="event-details">
                    <h4 class="event-title">${event.title}</h4>
                    <p class="event-description">${event.description}</p>
                    <div class="event-time"><i class="far fa-clock"></i> ${event.time}</div>
                    <div class="event-location"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
                </div>
            `;
            eventItem.addEventListener('click', () => showEventModal(event));
            eventsContainer.appendChild(eventItem);
        });
        
        // Update section titles
        if (document.getElementById('events-title')) {
            document.getElementById('events-title').textContent = barangayCalendarData.sectionTitles.events;
        }
        if (document.getElementById('upcoming-events-title')) {
            document.getElementById('upcoming-events-title').textContent = barangayCalendarData.sectionTitles.upcomingEvents;
        }
    }
    
    // Generate calendar dynamically
    function generateCalendar(month, year) {
        const calendarDates = document.getElementById('calendar-dates');
        if (!calendarDates) return;
        
        calendarDates.innerHTML = '';
        
        // Update month display
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
        const monthShortNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
        ];
        
        if (document.getElementById('calendar-month')) {
            document.getElementById('calendar-month').textContent = `${monthNames[month]} ${year}`;
        }
        
        // Add day headers
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            dayElement.textContent = day;
            calendarDates.appendChild(dayElement);
        });
        
        // Get first day of month and number of days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        // Get days from previous month
        const daysInPrevMonth = new Date(year, month, 0).getDate();
        
        // Add empty cells for days before the first day of the month (previous month)
        for (let i = firstDay - 1; i >= 0; i--) {
            const emptyCell = document.createElement('div');
            emptyCell.className = 'calendar-date other-month';
            emptyCell.textContent = daysInPrevMonth - i;
            calendarDates.appendChild(emptyCell);
        }
        
        // Add dates for the current month
        const today = new Date();
        for (let i = 1; i <= daysInMonth; i++) {
            const dateElement = document.createElement('div');
            dateElement.className = 'calendar-date';
            dateElement.textContent = i;
            dateElement.dataset.date = `${year}-${month + 1}-${i}`;
            
            // Mark today
            if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                dateElement.classList.add('today');
            }
    
            // Mark events
            const hasEvent = barangayCalendarData.events.some(event => {
                const eventMonthIndex = monthShortNames.findIndex(m => m.toLowerCase() === event.month.toLowerCase());
                return parseInt(event.day) === i && eventMonthIndex === month && year === 2025;
            });
            
            if (hasEvent) {
                dateElement.classList.add('event');
                dateElement.addEventListener('click', () => showEventDetails(i, month, year));
            } else {
                dateElement.addEventListener('click', () => {
                    // Show "No events" message
                    const modalBody = document.getElementById('modal-body');
                    modalBody.innerHTML = `
                        <div class="modal-event-date">
                            <i class="far fa-calendar-alt"></i>
                            <span>${monthNames[month]} ${i}, ${year}</span>
                        </div>
                        <h3 class="modal-event-title">No Events Scheduled</h3>
                        <p class="modal-event-description">There are no events scheduled for this date. Check back later for updates!</p>
                    `;
                    document.getElementById('event-modal').style.display = 'flex';
                });
            }
            
            calendarDates.appendChild(dateElement);
        }
        
        // Add empty cells for next month to complete the grid
        const totalCells = 42; // 6 rows x 7 days
        const cellsUsed = firstDay + daysInMonth;
        const remainingCells = totalCells - cellsUsed;
        
        for (let i = 1; i <= remainingCells; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.className = 'calendar-date other-month';
            emptyCell.textContent = i;
            calendarDates.appendChild(emptyCell);
        }
    }
    
    // Show event details in modal
    function showEventDetails(day, month, year) {
        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
        
        const monthShortNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
        ];
        
        // Find ALL events for this date
        const eventsForDate = barangayCalendarData.events.filter(event => {
            const eventMonthIndex = monthShortNames.findIndex(m => m.toLowerCase() === event.month.toLowerCase());
            return parseInt(event.day) === day && eventMonthIndex === month && year === 2025;
        });
        
        if (eventsForDate.length > 0) {
            const modalBody = document.getElementById('modal-body');
            
            // If multiple events on same day
            if (eventsForDate.length > 1) {
                modalBody.innerHTML = `
                    <div class="modal-event-date">
                        <i class="far fa-calendar-alt"></i>
                        <span>${monthNames[month]} ${day}, ${year}</span>
                        <span style="margin-left: auto; font-size: 0.9rem; color: var(--gray);">
                            ${eventsForDate.length} events
                        </span>
                    </div>
                    <h3 class="modal-event-title">Events on ${monthNames[month]} ${day}</h3>
                `;
                
                eventsForDate.forEach((event, index) => {
                    modalBody.innerHTML += `
                        <div style="margin-bottom: 20px; padding: 15px; background: var(--gray-light); border-radius: 10px;">
                            <h4 style="margin-bottom: 10px; color: var(--primary);">${event.title}</h4>
                            <p style="margin-bottom: 10px; color: var(--gray);">${event.description}</p>
                            <div style="display: flex; flex-direction: column; gap: 5px;">
                                <div class="modal-event-detail">
                                    <i class="far fa-clock"></i>
                                    <span>${event.time}</span>
                                </div>
                                <div class="modal-event-detail">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>${event.location}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } else {
                // Single event
                const event = eventsForDate[0];
                modalBody.innerHTML = `
                    <div class="modal-event-date">
                        <i class="far fa-calendar-alt"></i>
                        <span>${monthNames[month]} ${day}, ${year}</span>
                    </div>
                    <h3 class="modal-event-title">${event.title}</h3>
                    <p class="modal-event-description">${event.description}</p>
                    <div class="modal-event-details">
                        <div class="modal-event-detail">
                            <i class="far fa-clock"></i>
                            <span>${event.time}</span>
                        </div>
                        <div class="modal-event-detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.location}</span>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('event-modal').style.display = 'flex';
        }
    }
    
    // Show event modal for individual event
    function showEventModal(event) {
        const modalBody = document.getElementById('modal-body');
        modalBody.innerHTML = `
            <div class="modal-event-date">
                <i class="far fa-calendar-alt"></i>
                <span>${event.month} ${event.day}, 2025</span>
            </div>
            <h3 class="modal-event-title">${event.title}</h3>
            <p class="modal-event-description">${event.description}</p>
            <div class="modal-event-details">
                <div class="modal-event-detail">
                    <i class="far fa-clock"></i>
                    <span>${event.time}</span>
                </div>
                <div class="modal-event-detail">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>${event.location}</span>
                </div>
            </div>
        `;
        document.getElementById('event-modal').style.display = 'flex';
    }
    
    // Set up event listeners for calendar
    function setupEventListeners() {
        // Calendar navigation
        const prevMonthBtn = document.getElementById('prev-month');
        if (prevMonthBtn) {
            prevMonthBtn.addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
            });
        }
        
        const nextMonthBtn = document.getElementById('next-month');
        if (nextMonthBtn) {
            nextMonthBtn.addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
            });
        }
        
        // Modal close button
        const closeModalBtn = document.getElementById('close-modal');
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', () => {
                document.getElementById('event-modal').style.display = 'none';
            });
        }
        
        // Close modal button in footer
        const closeModalFooterBtn = document.getElementById('close-modal-btn');
        if (closeModalFooterBtn) {
            closeModalFooterBtn.addEventListener('click', () => {
                document.getElementById('event-modal').style.display = 'none';
            });
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('event-modal')) {
                document.getElementById('event-modal').style.display = 'none';
            }
        });
    }
    
    // Export admin functions
    window.barangayNews = {
        updateNewsSection: (title, subtitle) => {
            barangayNewsData.newsSection.title = title;
            barangayNewsData.newsSection.subtitle = subtitle;
            renderNews();
        },
        updateNews: (newNews) => {
            barangayNewsData.news = newNews;
            renderNews();
        },
        getNewsData: () => barangayNewsData.news,
        addNews: (newsItem) => {
            // Generate new ID
            const newId = barangayNewsData.news.length > 0 ? 
                Math.max(...barangayNewsData.news.map(n => n.id)) + 1 : 1;
            
            newsItem.id = newId;
            barangayNewsData.news.push(newsItem);
            renderNews();
        },
        removeNews: (newsId) => {
            const index = barangayNewsData.news.findIndex(news => news.id === newsId);
            if (index !== -1) {
                barangayNewsData.news.splice(index, 1);
                renderNews();
            }
        },
        markAsFeatured: (newsId) => {
            // Remove featured from all news
            barangayNewsData.news.forEach(news => {
                news.isFeatured = false;
            });
            
            // Mark selected as featured
            const newsItem = barangayNewsData.news.find(news => news.id === newsId);
            if (newsItem) {
                newsItem.isFeatured = true;
                renderNews();
            }
        },
        renderNews
    };
    
    window.barangayCalendar = {
        updateEvents: (newEvents) => {
            barangayCalendarData.events = newEvents;
            renderEvents();
            generateCalendar(currentMonth, currentYear);
        },
        updateSectionTitles: (newTitles) => {
            barangayCalendarData.sectionTitles = newTitles;
            renderEvents();
        },
        getEventsData: () => barangayCalendarData.events,
        addEvent: (event) => {
            barangayCalendarData.events.push(event);
            renderEvents();
            generateCalendar(currentMonth, currentYear);
        },
        removeEvent: (eventIndex) => {
            barangayCalendarData.events.splice(eventIndex, 1);
            renderEvents();
            generateCalendar(currentMonth, currentYear);
        },
        goToToday: () => {
            const today = new Date();
            currentMonth = today.getMonth();
            currentYear = today.getFullYear();
            generateCalendar(currentMonth, currentYear);
        },
        goToMonth: (month, year) => {
            currentMonth = month;
            currentYear = year;
            generateCalendar(currentMonth, currentYear);
        }
    };
    
    console.log('Barangay News & Calendar System Loaded');
</script>

</body>
</html>